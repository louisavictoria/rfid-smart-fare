<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BATRASCO Passenger Dashboard</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="passenger.css">
</head>

<body>
  <nav class="navbar navbar-dark fixed-top">
    <div class="container-fluid px-3">
      <a class="navbar-brand font-weight-800" href="#home">
        <img src="batrasco-logo.png" alt="Logo" class="nav-logo">
        BATRASCO
      </a>
    </div>
  </nav>

  <header class="hero-section" id="home">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">Welcome back,<br>Passenger!</h1>
        <p class="hero-sub">Ride smarter with BATRASCO — top up and track fares in one place.</p>
      </div>
    </div>
  </header>

 <main class="app-container" id="app">
    <div class="balance-card">
      <div class="bal-left">
        <p class="mb-1">Current Balance</p> 
        <h2 id="balanceDisplay">₱350.25</h2>
      </div>
      <div class="d-flex gap-2">
        <button class="btn-topup" onclick="scrollToTopup()">
          <i class="bi bi-wallet2 me-1"></i> Quick Top-Up
        </button>
      </div>
    </div>

    <section class="app-card" aria-labelledby="announcements-title">
      <h4 id="announcements-title" class="text-navy mb-2">
        <i class="bi bi-megaphone-fill me-2 icon-red"></i> Service Announcements
      </h4>
      <div id="announcement-list">
        <div class="notice-item text-navy small mb-2 p-2 rounded-3 border-start border-5 border-danger">
          <i class="bi bi-exclamation-triangle-fill me-1 text-danger"></i> <b>URGENT:</b> Heavy Traffic near Startoll exit. Expect 11-minute delay.
        </div>
        <div class="notice-item text-navy small mb-2 p-2 rounded-3 border-start border-5 border-warning">
          <i class="bi bi-calendar-x-fill me-1 text-warning"></i> Service Interruption on November 5. Check routes before travel.
        </div>
      </div>
    </section>

    <section id="topup">
      <h3 class="text-navy text-center mb-3">Recharge & History</h3>
      <div class="topup-grid">
        <div class="app-card">
          <h5 class="mb-1">Recharge Your Card</h5>
          <p class="muted mb-2">Card ID: <b>15438621</b></p>

          <label class="form-label">Select or Enter Amount</label>
          <div class="amount-buttons">
            <button class="btn btn-outline-secondary" data-amount="20">₱20</button>
            <button class="btn btn-outline-secondary" data-amount="40">₱40</button>
            <button class="btn btn-outline-secondary" data-amount="50">₱50</button>
            <button class="btn btn-outline-secondary" data-amount="100">₱100</button>
          </div>
          <input id="customAmount" type="number" class="form-control mb-3" placeholder="Custom amount (e.g., 250)">

          <label class="form-label">Select E-Wallet/Payment Method</label>
          <div class="ewallet-buttons mb-2">
            <button class="gcash" data-wallet="gcash"><i class="bi bi-wallet-fill me-1"></i> GCash</button>
            <button class="bank" data-wallet="bank"><i class="bi bi-bank me-1"></i> Bank</button>
            <button class="maya" data-wallet="maya"><i class="bi bi-phone-fill me-1"></i> Maya</button>
          </div>

          <button class="proceed-btn" id="proceedPayment" disabled>
            <i class="bi bi-credit-card-fill me-2"></i> Proceed to Payment
          </button>
          <p class="muted small mt-2 mb-0 text-center">Please select an amount and payment method.</p>
        </div>

        <div class="app-card">
          <h5 class="mb-2"><i class="bi bi-clock-history me-2 icon-red"></i> Recent Transactions</h5>
          <div class="transactions" id="transactionContainer">
            </div>
          <a href="#" class="small text-center d-block mt-3 text-red font-weight-700" data-bs-toggle="modal" data-bs-target="#historyModal">See More...</a>
        </div>
      </div>
    </section>
  </main>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="paymentToast" class="toast align-items-center text-bg-success border-0" role="alert">
      <div class="d-flex">
        <div class="toast-body">
          <i class="bi bi-check-circle-fill me-2"></i> Payment successful!
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <div class="modal fade" id="historyModal" tabindex="-1" aria-labelledby="historyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header bg-navy text-white">
          <h5 class="modal-title" id="historyModalLabel"><i class="bi bi-clock-history me-2"></i> Full Transaction History</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="fullTransactionList">
            <p class="text-center text-muted">Loading history...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

    <!-- Floating Chatbot Icon -->
  <div class="chatbot-icon" id="chatbotToggle">
    <i class="bi bi-robot"></i>
  </div>

  <!-- Chatbot Popup -->
  <div id="chatbotBox" class="chatbot-box d-none">
    <div class="chatbot-header">
      <img src="batrasco-logo.png" alt="BATRASCO Logo" class="chatbot-logo">
      <span>BATRASCO Assistant</span>
      <button class="chatbot-close" id="closeChatbot">&times;</button>
    </div>
    <div class="chatbot-messages" id="chatMessages"></div>
    <div class="chatbot-input">
      <input type="text" id="chatInput" placeholder="Type your message..." />
      <button id="sendMessage"><i class="bi bi-send-fill"></i></button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="passenger.js"></script>
</body>
</html>